<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart - FLYSTEP</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen p-6">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-5xl font-bold text-center my-10">Your Cart</h1>
        <div id="items"></div>

        <div class="bg-white rounded-3xl p-8 shadow-2xl mt-10">
            <h2 class="text-3xl font-bold mb-6">Delivery Address</h2>
            <input id="name" placeholder="Full Name" class="w-full p-4 border rounded-xl mb-4">
            <input id="phone" placeholder="Phone" class="w-full p-4 border rounded-xl mb-4">
            <input id="email" placeholder="Email" class="w-full p-4 border rounded-xl mb-4">
            <textarea id="address" placeholder="Full Address with Pincode"
                class="w-full p-4 border rounded-xl mb-6 h-32"></textarea>

            <div class="text-xl mb-6">
                <label><input type="radio" name="pay" value="Cash on Delivery" checked> Cash on Delivery</label><br>
                <label class="mt-3 block"><input type="radio" name="pay" value="Online Payment"> Online Payment (Coming
                    Soon)</label>
            </div>

            <button onclick="placeOrder()"
                class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-6 rounded-2xl text-2xl font-bold">
                Place Order
            </button>
        </div>
    </div>

    <script>
        // Cart items show
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        document.getElementById('items').innerHTML = cart.map(item => `
  <div class="bg-white p-6 rounded-2xl mb-4 flex justify-between items-center shadow-lg">
    <div>
      <h3 class="text-xl font-bold">${item.name}</h3>
      <p class="text-2xl font-bold">₹${item.price}</p>
    </div>
    <img src="${item.img}" class="w-28 rounded-xl">
  </div>
`).join('');

        function placeOrder() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const address = document.getElementById('address').value;
            if (!name || !phone || !address) return alert("Fill all details");

            const total = cart.reduce((a, b) => a + b.price, 0);

            // Send to your email
            fetch('https://formspree.io/f/xblrjwpk', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    Name: name,
                    Phone: phone,
                    Email: email,
                    Address: address,
                    Items: cart.map(i => `${i.name} - ₹${i.price}`).join(', '),
                    Total: total,
                    Payment: document.querySelector('input[name="pay"]:checked').value,
                    Date: new Date().toLocaleString('en-IN')
                })
            }).then(() => {
                alert("Order Placed! Check your email for confirmation. Owner has been notified.");
                localStorage.removeItem('cart');
                location.href = 'index.html';
            });
        }
        // Ye line placeOrder() function ke andar alert ke pehle daal dena
        const allOrders = JSON.parse(localStorage.getItem('allOrders') || '[]');
        allOrders.push({
            name, phone, email, address, payment,
            items: cart.map(i => i.name).join(', '),
            total, date: new Date().toLocaleString('en-IN')
        });
        localStorage.setItem('allOrders', JSON.stringify(allOrders));
    </script>
</body>

</html>